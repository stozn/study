(self.webpackChunkvirtual_judge=self.webpackChunkvirtual_judge||[]).push([[4058],{4058:(e,t,a)=>{"use strict";a(3734),a(8961)},8961:(e,t,a)=>{var o=a(9755),s=a(4940).Z;o((function(){if(o("a.login").click((function(){const e=this.href;s.doIfLoggedIn((function(){e.endsWith("#")||e.indexOf("void(0)")>=0?location.reload():location.href=e}))})),o("a.logout").click((function(){o.post(basePath+"/user/logout",(function(){window.location.reload()}))})),location.href.indexOf("/contest/")>=0?o("#nav-contest").addClass("active"):location.href.indexOf("/status")>=0?o("#nav-status").addClass("active"):location.href.indexOf("/problem")>=0?o("#nav-problem").addClass("active"):location.href.indexOf("/contest")>=0?o("#nav-contest").addClass("active"):location.href.indexOf("/workbook")>=0?o("#nav-workbook").addClass("active"):location.href.indexOf("/user")>=0?o("#nav-user").addClass("active"):location.href.indexOf("/group")>=0?o("#nav-group").addClass("active"):location.href.indexOf("/comment")>=0?o("#nav-comment").addClass("active"):location.href.indexOf("/article")>=0&&o("#nav-article").addClass("active"),s.getUsername()){o(".update-profile").click((function(){o.get(basePath+"/user/update",(function(e){a(3612).$(e)}))}));const t={"-webkit-animation":"twinkling 1s infinite ease-in-out",color:"red"};"true"===o("#newMessage").val()&&(o("#userNameDropdown").css(t),o("div.user-dropdown a.message").css(t))}else if(o("#top-nav").length>0){const n=a(941);o(n).appendTo(document.body);const r=o("#registerModal");function e(){o("#register-captcha-img").attr("src",basePath+"/util/captcha?"+s.getServerTime())}o("#register-captcha-img").click(e),r.on("show.bs.modal",(function(){o("#register-alert").hide(),e()})).modal({backdrop:"static",show:!1});const i=o("#btn-register"),l=o("#register-form");i.click((function(){l.submit()})),l.submit((function(){i.prop("disabled",!0);const e={username:o("#register-username").val(),password:o("#register-password").val(),repassword:o("#register-repeat-password").val(),nickname:o("#register-nickname").val(),school:o("#register-school").val(),qq:o("#register-qq").val(),email:o("#register-email").val(),blog:o("#register-introduction").val(),captcha:o("#register-captcha").val(),share:1};return o.post(basePath+"/user/register",e,(function(e){i.prop("disabled",!1),"success"==e?(r.modal("hide"),window.location.reload()):o("#register-alert").html(e).show()})),!1}));const d=o("#loginModal");d.on("show.bs.modal",(function(){o("#login-alert").hide(),d.off("hidden.bs.modal")}));const c=o("#btn-login"),u=o("#login-form");c.click((function(){u.submit()})),u.submit((function(){c.prop("disabled",!0);const e={username:o("#login-username").val().trim(),password:o("#login-password").val().trim()};return o.post(basePath+"/user/login",e,(function(e){c.prop("disabled",!1),"success"===e?d.on("hidden.bs.modal",(function(){s.loginSuccess()})).modal("hide"):o("#login-alert").html(e).show()})),!1})),o("#btn-forget-password").click((function(){o.post(basePath+"/user/findPassword2?userName="+encodeURIComponent(o("#login-username").val().trim()),(function(e){o("#login-alert").html(e).show()}))}))}o("#img-support").click((function(){const e=location.href;location.href=basePath+"/message?to=Isun&initContent="+encodeURIComponent("My location: "+e+"\n\nFeedback:")})),void 0===s.getUsername()&&o("#img-support").hide()}))},326:(e,t,a)=>{var o=a(9755);Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e},o.fn.serializeObject=function(){var e={},t=this.serializeArray();return o.each(t,(function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""})),e},window.setIntervalAndExecute=function(e,t){return setTimeout(e,1),setInterval(e,t)},Array.prototype.last||(Array.prototype.last=function(){return this[this.length-1]}),Array.prototype.uniq||(Array.prototype.uniq=function(){const e=[this[0]];for(let t=1;t<this.length;t++)this[t-1]!==this[t]&&e.push(this[t]);return e}),Array.prototype.uniqUnsorted||(Array.prototype.uniqUnsorted=function(){const e=[],t={};for(let a=0;a<this.length;a++){const o=this[a];o in t||(e.push(o),t[o]=!0)}return e})},4940:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i}),a(326);var o=a(8975),s=a.n(o),n=a(9755);let r=window.Vjudge;r||(r=window.Vjudge={timeDiff:void 0,nextFunc:void 0,gaId:void 0,username:void 0,userId:void 0,sup:void 0,lastClickTimestamp:(new Date).valueOf(),cfg:void 0,cfgRequested:!1,basePath:window.location.origin,init(){this.renderTime();const e=n("[name=systemVersion]").val();e&&this.storage.set("systemVersion",e),n(window).click((function(){r.lastClickTimestamp=(new Date).valueOf()})),this.gaId=n("[name=gaId]").val(),this.username=n("#visitor_username").val(),this.userId=n("#visitor_userId").val(),this.sup=n("#visitor_sup").val()},getLastClickTimestamp(){return this.lastClickTimestamp},sinceLastClick(){return(new Date).valueOf()-this.getLastClickTimestamp()},getSystemVersion(){return this.storage.get("systemVersion")},getUsername(){return this.username},getUserId(){return this.userId},getSup(){return this.sup},formatDate:e=>new Date(e).format("yyyy-MM-dd hh:mm:ss"),parseDate(e){if(!e.match(/^\d{4}-\d{1,2}-\d{1,2} \d{1,2}:\d{1,2}:\d{1,2}$/))throw"Begin time format should be 'yyyy-MM-dd hh:mm:ss'";const t=e.split(/\D+/),a=parseInt(t[0],10),o=parseInt(t[1],10),s=parseInt(t[2],10),n=parseInt(t[3],10),r=parseInt(t[4],10),i=parseInt(t[5],10);return new Date(a,o-1,s,n,r,i)},getCfg(){return this.cfg||(this.cfg=this.storage.get("cfg"),this.cfg&&this.getSystemVersion()===this.cfg.version||this.cfgRequested||(this.cfgRequested=!0,n.get(basePath+"/util/cfg?"+(new Date).valueOf(),(function(e){this.cfg=e,r.storage.set("cfg",this.cfg)})))),this.cfg||{}},getOjs(){return this.getCfg().remoteOJs||{}},getOjsList(){const e=n.map(this.getOjs(),(function(e,t){return e}));return e.sort((function(e,t){return e.name.localeCompare(t.name,"zh")})),e},getCdnBaseUrl(){return this.getCfg().cdnBaseUrl||"https://vj.csgrandeur.cn/"},replaceCdnBaseUrl(e){const t=this.getCdnBaseUrl();return e.indexOf("CDN_BASE_URL/")<0?e:t?e.replace(/CDN_BASE_URL\//g,t):e},getServerTime(){const e=(new Date).valueOf();return void 0===this.timeDiff&&(this.timeDiff=this.storage.get("timeDiff"),(void 0===this.timeDiff||Math.abs(e-this.timeDiff.lastUpdate)>3e5)&&(this.timeDiff={val:0,lastUpdate:e},n.post(basePath+"/util/serverTime",(function(t){r.timeDiff={val:t-(e+(new Date).valueOf())/2,lastUpdate:e},r.storage.set("timeDiff",r.timeDiff)})))),e+(this.timeDiff?this.timeDiff.val:0)},getRelativeString(e){const t=(this.getServerTime()-e)/1e3,a=Math.abs(t),o=t>0?"ago":"later";return a<120?Math.round(a)+" sec "+o:a<7200?Math.round(a/60)+" min "+o:a<172800?Math.round(a/3600)+" hr "+o:a<5184e3?Math.round(a/86400)+" days "+o:a<63072e3?Math.round(a/2592e3)+" months "+o:Math.round(a/31536e3)+" years "+o},renderLocalizedTime(e,t){const a=(t?t():n()).parents("table");n(".localizedTime").each((function(){const t=n(this);if("true"===t.attr("rendered"))return;t.attr("rendered",!0);const o=t.data("time"),s=new Date(parseInt(o)).format("yyyy-MM-dd hh:mm:ss"),i=e.call(t),l=n("<span class='relative'></span>"),d=n("<span class='absolute'></span>").text(s);t.append(l).append(d),function e(){if(0!==l.parents("html").length){l.text(r.getRelativeString(o));const t=Math.abs((r.getServerTime()-o)/1e3);setTimeout(e,t<120?1e3:t<7200?6e4:36e5)}}(),i.mouseleave((function(){a.removeClass("hover-date")})).mouseenter((function(){a.addClass("hover-date")}))}))},parseUrlParameter(){const e={},t=window.location.href.replace(/#.+$/,""),a=t.indexOf("?"),o=t.substring(a+1).split("&");for(let t=0;t<o.length;t++)try{const a=o[t].split("=");e[a[0]]=a[1]}catch(e){}return e},doIfLoggedIn(e){n.post(basePath+"/user/checkLogInStatus",(function(t){1==t?e():(r.nextFunc=e,n("#loginModal").modal("show"))}))},loginSuccess(){this.nextFunc()},isScrolledIntoView(e){const t=n(window).scrollTop(),a=t+n(window).height(),o=n(e).offset();if(!o)return!1;const s=o.top;return s+n(e).height()>=t&&s<=a},sendGaPageview(){const e=window.location.pathname+window.location.search+window.location.hash;"function"==typeof gtag&&gtag("config",this.gaId,{page_path:e})},storage:{cache:{},set(e,t,a){try{(a?this.cache:localStorage)[e]="object"==typeof t?JSON.stringify(t):t}catch(e){console.error(e)}},get(e,t,a){const o=(a?this.cache:localStorage)[e];if(void 0===o)return t;try{return JSON.parse(o)}catch(e){return o}}},initBootstrapRadio(e,t,a){e.find("label").each((function(){const e=n(this),o=e.find('input[type="radio"]');e.on("click",(function(){if(e.hasClass("disabled"))return!1;a(o.val())})),null!==t&&o.val()==t&&n(this).addClass("active")})),null!==t&&a(t)},getTimezoneTUT:{"UTC+8":"CST","UTC-7":"PDT","UTC-5":"EST","UTC-8":"PST","UTC+6":"BST"},getTimezone(){const e=(new Date).getTimezoneOffset()/-60,t="UTC"+(e>=0?"+"+e:e);return this.getTimezoneTUT[t]||t},formatTimeSpan(e){const t=Math.floor(e/864e5);e-=864e5*t;const a=Math.floor(e/36e5);e-=36e5*a;const o=Math.floor(e/6e4);e-=6e4*o;const n=Math.floor(e/1e3);return t>0?s().sprintf("%d:%02d:%02d:%02d",t,a,o,n):s().sprintf("%02d:%02d:%02d",a,o,n)},renderTime(){const e=this.getTimezone();setIntervalAndExecute((function(){const t=new Date(r.getServerTime()).format("yyyy-MM-dd hh:mm:ss");n(".currentTimeTZ").html(t+" "+e),n(".currentTime").html(t)}),1e3)},escapeHtmlentityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},escapeHtml:e=>String(e).replace(/[&<>"'`=\/]/g,(function(e){return r.escapeHtmlentityMap[e]})),parseHashParams(){const e=/(\w+)=([^$&]*)/g;let t;const a={};for(;t=e.exec(location.hash);)a[t[1]]=t[2];return a},makeDTReq(e,t){const a={draw:e.draw,start:e.start,length:e.length};return e.order.length>0&&(a.sortDir=e.order[0].dir,a.sortCol=e.order[0].column),t instanceof Object&&n.extend(a,t),a},getCproblemNum:e=>(e<26?"":String.fromCharCode(64+Math.floor(e/26)))+String.fromCharCode(65+e%26),getCproblemIndex:e=>2===e.length?26*(e.charCodeAt(0)-64)+e.charCodeAt(1)-65:e.charCodeAt(0)-65},n((function(){r.init()})));const i=r},3612:(e,t,a)=>{"use strict";a.d(t,{$:()=>l});var o,s=a(9755),n=a(4940).Z,r=a(4634);function i(){s("#update-captcha-img").attr("src",basePath+"/util/captcha?"+n.getServerTime())}function l(e){(o=s(r)).appendTo(document.body),o.on("show.bs.modal",(function(){!function(e){s("#update-username").val(e.username),s("#update-nickname").val(e.nickname),s("#update-school").val(e.school),s("#update-qq").val(e.qq),s("#update-email").val(e.email),s("#update-introduction").val(e.intro),i(),s("#update-captcha-img").click(i);var t=s("#btn-update-profile");t.click((function(){t.prop("disabled",!0),s.ajax({type:"POST",url:basePath+"/user/update",dataType:"json",contentType:"application/json",data:JSON.stringify({password:s("#update-orig-password").val(),newpassword:s("#update-password").val(),repassword:s("#update-repeat-password").val(),nickname:s("#update-nickname").val(),school:s("#update-school").val(),qq:s("#update-qq").val(),email:s("#update-email").val(),intro:s("#update-introduction").val(),captcha:s("#update-captcha").val()})}).done((function(a){a.error?(t.prop("disabled",!1),s("#update-alert").text(a.error).show()):window.location.href=basePath+"/user/"+e.username})).fail((function(e,a,o){t.prop("disabled",!1),s("#update-alert").text(a+" - "+o).show()}))}))}(e)})).on("hidden.bs.modal",(function(){s(this).remove()})).modal({backdrop:"static",show:!0})}},941:e=>{"use strict";e.exports='<div class="modal fade" id="loginModal" tabindex="-1" role="dialog">\n    <div class="modal-dialog" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal">\n                    <span>&times;</span>\n                </button>\n                <h4 class="modal-title" id="loginModalLabel">Login</h4>\n            </div>\n            <div class="modal-body">\n                <form id="login-form">\n                    <div class="form-group">\n                        \x3c!--<label for="login-username" class="form-control-label">Username:</label>--\x3e\n                        <input type="text" class="form-control" id="login-username" placeholder="Username or Email">\n                    </div>\n                    <div class="form-group">\n                        \x3c!--<label for="login-password" class="form-control-label">Password:</label>--\x3e\n                        <input type="password" class="form-control" id="login-password" placeholder="Password">\n                    </div>\n                    <input type="submit" style="display: none"/>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <div class="alert alert-danger" role="alert" id="login-alert"></div>\n                <button type="button" class="btn btn-secondary float-xs-left" id="btn-forget-password">\n                    Forget Password\n                </button>\n                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>\n                <button type="button" class="btn btn-primary" id="btn-login">Login</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="modal fade" id="registerModal" tabindex="-1" role="dialog">\n    <div class="modal-dialog modal-lg" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal">\n                    <span>&times;</span>\n                </button>\n                <h4 class="modal-title" id="registerModalLabel">Register</h4>\n            </div>\n            <div class="modal-body">\n                <form id="register-form">\n                    <div class="form-group row">\n                        <label for="register-username" class="col-xs-2 form-control-label">* Username:</label>\n                        <div class="col-xs-10">\n                            <input type="text" class="form-control" id="register-username" placeholder="IMPORTANT: Once registered, you can\'t change it !">\n                        </div>\n                    </div>\n                    <div class="form-group row">\n                        <label for="register-password" class="col-xs-2 form-control-label">* Password:</label>\n                        <div class="col-xs-10">\n                            <input type="password" class="form-control" id="register-password" placeholder="">\n                        </div>\n                    </div>\n                    <div class="form-group row">\n                        <label for="register-repeat-password" class="col-xs-2 form-control-label">* Repeat Pass:</label>\n                        <div class="col-xs-10">\n                            <input type="password" class="col-xs-10 form-control" id="register-repeat-password" placeholder="Repeat password above">\n                        </div>\n                    </div>\n                    <div class="form-group row">\n                        <label for="register-nickname" class="col-xs-2 form-control-label">Nickname:</label>\n                        <div class="col-xs-10">\n                            <input type="text" class="col-xs-10 form-control" id="register-nickname" placeholder="">\n                        </div>\n                    </div>\n                    <div class="form-group row">\n                        <label for="register-school" class="col-xs-2 form-control-label">School:</label>\n                        <div class="col-xs-10">\n                            <input type="text" class="col-xs-10 form-control" id="register-school" placeholder="">\n                        </div>\n                    </div>\n                    <div class="form-group row">\n                        <label for="register-qq" class="col-xs-2 form-control-label">QQ:</label>\n                        <div class="col-xs-10">\n                            <input type="text" class="col-xs-10 form-control" id="register-qq" placeholder="">\n                        </div>\n                    </div>\n                    <div class="form-group row">\n                        <label for="register-email" class="col-xs-2 form-control-label">* Email:</label>\n                        <div class="col-xs-10">\n                            <input type="text" class="col-xs-10 form-control" id="register-email" placeholder="Invisible to others. Please fill a real one. You need it after you forget the password.">\n                        </div>\n                    </div>\n                    <div class="form-group row">\n                        <label for="register-captcha" class="col-xs-2 form-control-label">* Captcha:</label>\n                        <div class="col-xs-10">\n                            <input type="text" class="col-xs-10 form-control" id="register-captcha" placeholder="">\n                            <img src="" id="register-captcha-img" />\n                        </div>\n                    </div>\n                    <div class="form-group row">\n                        <label for="register-introduction" class="col-xs-2 form-control-label">Introduction:</label>\n                        <div class="col-xs-10">\n                            <textarea class="col-xs-10 form-control" id="register-introduction" rows="25"\n                                      placeholder="Your brief introduction in Markdown"></textarea>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <div class="alert alert-danger" role="alert" id="register-alert"></div>\n                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>\n                <button type="button" class="btn btn-primary" id="btn-register">Register</button>\n            </div>\n        </div>\n    </div>\n</div>\n'},4634:e=>{"use strict";e.exports='<div class="modal fade" id="updateModal" tabindex="-1" role="dialog">\n    <div class="modal-dialog modal-lg" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal">\n                    <span>&times;</span>\n                </button>\n                <h4 class="modal-title" id="updateModalLabel">Update</h4>\n            </div>\n            <div class="modal-body">\n                <form id="update-form">\n                    <div class="row">\n                        <div class="col-md-6">\n                            <div class="form-group">\n                                <label for="update-username" class="form-control-label">* Username:</label>\n                                <input type="text" class="form-control disabled" id="update-username" disabled>\n                            </div>\n                            <div class="form-group">\n                                <label for="update-orig-password" class="form-control-label">* Original\n                                    Password:</label>\n                                <input type="password" class="form-control" id="update-orig-password"\n                                       placeholder="Required to update any field">\n                            </div>\n                            <div class="form-group">\n                                <label for="update-password" class="form-control-label">Password:</label>\n                                <input type="password" class="form-control" id="update-password">\n                            </div>\n                            <div class="form-group">\n                                <label for="update-repeat-password" class="form-control-label">Repeat Password:</label>\n                                <input type="password" class="form-control" id="update-repeat-password">\n                            </div>\n                            <div class="form-group">\n                                <label for="update-nickname" class="form-control-label">Nickname:</label>\n                                <input type="text" class="form-control" id="update-nickname">\n                            </div>\n                            <div class="form-group">\n                                <label for="update-school" class="form-control-label">School:</label>\n                                <input type="text" class="form-control" id="update-school">\n                            </div>\n                            <div class="form-group">\n                                <label for="update-qq" class="form-control-label">QQ:</label>\n                                <input type="text" class="form-control" id="update-qq">\n                            </div>\n                            <div class="form-group">\n                                <label for="update-email" class="form-control-label">* Email:</label>\n                                <input type="text" class="form-control" id="update-email">\n                            </div>\n                            <div class="form-group">\n                                <label for="update-captcha" class="form-control-label">* Captcha:</label>\n                                <input type="text" class="form-control" id="update-captcha">\n                                <img src="" id="update-captcha-img" />\n                            </div>\n                        </div>\n                        <div class="col-md-6">\n                            <div class="form-group">\n                                <label for="update-introduction" class="form-control-label">Introduction:</label>\n                                <textarea class="form-control" id="update-introduction" rows="25"\n                                          placeholder="in Markdown"></textarea>\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class="modal-footer">\n                <div class="alert alert-danger" role="alert" id="update-alert" style="display: none"></div>\n                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>\n                <button type="button" class="btn btn-primary" id="btn-update-profile">Update</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}}]);